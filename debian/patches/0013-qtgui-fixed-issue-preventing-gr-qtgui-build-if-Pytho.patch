From b22c1c0e8e4150a6cb33b1af75582d12d0aaed7a Mon Sep 17 00:00:00 2001
From: Tom Rondeau <tom@trondeau.com>
Date: Thu, 12 Dec 2013 10:50:56 -0500
Subject: [PATCH 13/25] qtgui: fixed issue preventing gr-qtgui build if
 Python-dev is not installed (ENABLE_PYTHON=False).

---
 gr-qtgui/include/gnuradio/qtgui/const_sink_c.h       |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/freq_sink_c.h        |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/freq_sink_f.h        |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/histogram_sink_f.h   |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/sink_c.h             |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/sink_f.h             |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/time_raster_sink_b.h |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/time_raster_sink_f.h |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/time_sink_c.h        |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/time_sink_f.h        |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/waterfall_sink_c.h   |    6 ++++++
 gr-qtgui/include/gnuradio/qtgui/waterfall_sink_f.h   |    6 ++++++
 gr-qtgui/lib/CMakeLists.txt                          |    7 ++++++-
 gr-qtgui/lib/const_sink_c_impl.cc                    |    2 ++
 gr-qtgui/lib/const_sink_c_impl.h                     |    3 +++
 gr-qtgui/lib/freq_sink_c_impl.cc                     |    2 ++
 gr-qtgui/lib/freq_sink_c_impl.h                      |    3 +++
 gr-qtgui/lib/freq_sink_f_impl.cc                     |    2 ++
 gr-qtgui/lib/freq_sink_f_impl.h                      |    3 +++
 gr-qtgui/lib/histogram_sink_f_impl.cc                |    2 ++
 gr-qtgui/lib/histogram_sink_f_impl.h                 |    3 +++
 gr-qtgui/lib/sink_c_impl.cc                          |    2 ++
 gr-qtgui/lib/sink_c_impl.h                           |    3 +++
 gr-qtgui/lib/sink_f_impl.cc                          |    2 ++
 gr-qtgui/lib/sink_f_impl.h                           |    3 +++
 gr-qtgui/lib/time_raster_sink_b_impl.cc              |    2 ++
 gr-qtgui/lib/time_raster_sink_b_impl.h               |    3 +++
 gr-qtgui/lib/time_raster_sink_c_impl.cc              |    2 ++
 gr-qtgui/lib/time_raster_sink_c_impl.h               |    3 +++
 gr-qtgui/lib/time_raster_sink_f_impl.cc              |    2 ++
 gr-qtgui/lib/time_raster_sink_f_impl.h               |    3 +++
 gr-qtgui/lib/time_sink_c_impl.cc                     |    2 ++
 gr-qtgui/lib/time_sink_c_impl.h                      |    3 +++
 gr-qtgui/lib/time_sink_f_impl.cc                     |    2 ++
 gr-qtgui/lib/time_sink_f_impl.h                      |    3 +++
 gr-qtgui/lib/waterfall_sink_c_impl.cc                |    2 ++
 gr-qtgui/lib/waterfall_sink_c_impl.h                 |    3 +++
 gr-qtgui/lib/waterfall_sink_f_impl.cc                |    2 ++
 gr-qtgui/lib/waterfall_sink_f_impl.h                 |    3 +++
 39 files changed, 143 insertions(+), 1 deletion(-)

diff --git a/gr-qtgui/include/gnuradio/qtgui/const_sink_c.h b/gr-qtgui/include/gnuradio/qtgui/const_sink_c.h
index d430b6f..6b305f6 100644
--- a/gr-qtgui/include/gnuradio/qtgui/const_sink_c.h
+++ b/gr-qtgui/include/gnuradio/qtgui/const_sink_c.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_CONST_SINK_C_H
 #define INCLUDED_QTGUI_CONST_SINK_C_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -61,7 +64,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_y_axis(double min, double max) = 0;
       virtual void set_x_axis(double min, double max) = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/freq_sink_c.h b/gr-qtgui/include/gnuradio/qtgui/freq_sink_c.h
index 667ee95..d0a4a3d 100644
--- a/gr-qtgui/include/gnuradio/qtgui/freq_sink_c.h
+++ b/gr-qtgui/include/gnuradio/qtgui/freq_sink_c.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_FREQ_SINK_C_H
 #define INCLUDED_QTGUI_FREQ_SINK_C_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -68,7 +71,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_fft_size(const int fftsize) = 0;
       virtual int fft_size() const = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/freq_sink_f.h b/gr-qtgui/include/gnuradio/qtgui/freq_sink_f.h
index 77e9159..25a4c80 100644
--- a/gr-qtgui/include/gnuradio/qtgui/freq_sink_f.h
+++ b/gr-qtgui/include/gnuradio/qtgui/freq_sink_f.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_FREQ_SINK_F_H
 #define INCLUDED_QTGUI_FREQ_SINK_F_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -68,7 +71,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_fft_size(const int fftsize) = 0;
       virtual int fft_size() const = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/histogram_sink_f.h b/gr-qtgui/include/gnuradio/qtgui/histogram_sink_f.h
index 193c786..07ad124 100644
--- a/gr-qtgui/include/gnuradio/qtgui/histogram_sink_f.h
+++ b/gr-qtgui/include/gnuradio/qtgui/histogram_sink_f.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_HISTOGRAM_SINK_F_H
 #define INCLUDED_QTGUI_HISTOGRAM_SINK_F_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -82,7 +85,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
     public:
       virtual std::string title() = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/sink_c.h b/gr-qtgui/include/gnuradio/qtgui/sink_c.h
index 9b30e74..d1c35eb 100644
--- a/gr-qtgui/include/gnuradio/qtgui/sink_c.h
+++ b/gr-qtgui/include/gnuradio/qtgui/sink_c.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_SINK_C_H
 #define INCLUDED_QTGUI_SINK_C_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/block.h>
 #include <qapplication.h>
@@ -74,7 +77,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_fft_size(const int fftsize) = 0;
       virtual int fft_size() const = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/sink_f.h b/gr-qtgui/include/gnuradio/qtgui/sink_f.h
index 99e4994..7d56a7a 100644
--- a/gr-qtgui/include/gnuradio/qtgui/sink_f.h
+++ b/gr-qtgui/include/gnuradio/qtgui/sink_f.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_SINK_F_H
 #define INCLUDED_QTGUI_SINK_F_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/block.h>
 #include <qapplication.h>
@@ -74,7 +77,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_fft_size(const int fftsize) = 0;
       virtual int fft_size() const = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_b.h b/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_b.h
index 22130e5..5304dd4 100644
--- a/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_b.h
+++ b/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_b.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_TIME_RASTER_SINK_B_H
 #define INCLUDED_QTGUI_TIME_RASTER_SINK_B_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -73,7 +76,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_update_time(double t) = 0;
       virtual void set_title(const std::string &title) = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_f.h b/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_f.h
index 5a82587..2c13265 100644
--- a/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_f.h
+++ b/gr-qtgui/include/gnuradio/qtgui/time_raster_sink_f.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_TIME_RASTER_SINK_F_H
 #define INCLUDED_QTGUI_TIME_RASTER_SINK_F_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -70,7 +73,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_update_time(double t) = 0;
       virtual void set_title(const std::string &title) = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/time_sink_c.h b/gr-qtgui/include/gnuradio/qtgui/time_sink_c.h
index d5b50ad..f02226c 100644
--- a/gr-qtgui/include/gnuradio/qtgui/time_sink_c.h
+++ b/gr-qtgui/include/gnuradio/qtgui/time_sink_c.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_TIME_SINK_C_H
 #define INCLUDED_QTGUI_TIME_SINK_C_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/qtgui/trigger_mode.h>
 #include <gnuradio/sync_block.h>
@@ -66,7 +69,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_y_axis(double min, double max) = 0;
       virtual void set_update_time(double t) = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/time_sink_f.h b/gr-qtgui/include/gnuradio/qtgui/time_sink_f.h
index 575e6c8..64e347b 100644
--- a/gr-qtgui/include/gnuradio/qtgui/time_sink_f.h
+++ b/gr-qtgui/include/gnuradio/qtgui/time_sink_f.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_TIME_SINK_F_H
 #define INCLUDED_QTGUI_TIME_SINK_F_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/qtgui/trigger_mode.h>
 #include <gnuradio/sync_block.h>
@@ -64,7 +67,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void set_y_axis(double min, double max) = 0;
       virtual void set_update_time(double t) = 0;
diff --git a/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_c.h b/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_c.h
index 74b94bb..e1e27a4 100644
--- a/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_c.h
+++ b/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_c.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_WATERFALL_SINK_C_H
 #define INCLUDED_QTGUI_WATERFALL_SINK_C_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -75,7 +78,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void clear_data() = 0;
       
diff --git a/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_f.h b/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_f.h
index 8b6fce2..006f592 100644
--- a/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_f.h
+++ b/gr-qtgui/include/gnuradio/qtgui/waterfall_sink_f.h
@@ -23,7 +23,10 @@
 #ifndef INCLUDED_QTGUI_WATERFALL_SINK_F_H
 #define INCLUDED_QTGUI_WATERFALL_SINK_F_H
 
+#ifdef ENABLE_PYTHON
 #include <Python.h>
+#endif
+
 #include <gnuradio/qtgui/api.h>
 #include <gnuradio/sync_block.h>
 #include <qapplication.h>
@@ -74,7 +77,10 @@ namespace gr {
 		       QWidget *parent=NULL);
 
       virtual void exec_() = 0;
+
+#ifdef ENABLE_PYTHON
       virtual PyObject* pyqwidget() = 0;
+#endif
 
       virtual void clear_data() = 0;
 
diff --git a/gr-qtgui/lib/CMakeLists.txt b/gr-qtgui/lib/CMakeLists.txt
index 257f03a..93c3493 100644
--- a/gr-qtgui/lib/CMakeLists.txt
+++ b/gr-qtgui/lib/CMakeLists.txt
@@ -143,11 +143,16 @@ list(APPEND qtgui_libs
     volk
     ${QWT_LIBRARIES}
     ${QT_LIBRARIES}
-    ${PYTHON_LIBRARIES}
     ${FFTW3F_LIBRARIES}
     ${LOG4CPP_LIBRARIES}
 )
 
+if(ENABLE_PYTHON)
+  list(APPEND qtgui_libs
+    ${PYTHON_LIBRARIES}
+  )
+endif(ENABLE_PYTHON)
+
 add_definitions(-DQWT_DLL) #setup QWT library linkage
 add_library(gnuradio-qtgui SHARED ${qtgui_srcs})
 target_link_libraries(gnuradio-qtgui ${qtgui_libs})
diff --git a/gr-qtgui/lib/const_sink_c_impl.cc b/gr-qtgui/lib/const_sink_c_impl.cc
index 05c7c5d..c4651fc 100644
--- a/gr-qtgui/lib/const_sink_c_impl.cc
+++ b/gr-qtgui/lib/const_sink_c_impl.cc
@@ -129,6 +129,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     const_sink_c_impl::pyqwidget()
     {
@@ -136,6 +137,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     const_sink_c_impl::set_y_axis(double min, double max)
diff --git a/gr-qtgui/lib/const_sink_c_impl.h b/gr-qtgui/lib/const_sink_c_impl.h
index a74eac6..e2faa72 100644
--- a/gr-qtgui/lib/const_sink_c_impl.h
+++ b/gr-qtgui/lib/const_sink_c_impl.h
@@ -67,7 +67,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_y_axis(double min, double max);
       void set_x_axis(double min, double max);
diff --git a/gr-qtgui/lib/freq_sink_c_impl.cc b/gr-qtgui/lib/freq_sink_c_impl.cc
index 473aa6d..c210278 100644
--- a/gr-qtgui/lib/freq_sink_c_impl.cc
+++ b/gr-qtgui/lib/freq_sink_c_impl.cc
@@ -153,6 +153,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     freq_sink_c_impl::pyqwidget()
     {
@@ -160,6 +161,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     freq_sink_c_impl::set_fft_size(const int fftsize)
diff --git a/gr-qtgui/lib/freq_sink_c_impl.h b/gr-qtgui/lib/freq_sink_c_impl.h
index cadab9c..8079c81 100644
--- a/gr-qtgui/lib/freq_sink_c_impl.h
+++ b/gr-qtgui/lib/freq_sink_c_impl.h
@@ -84,7 +84,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_fft_size(const int fftsize);
       int fft_size() const;
diff --git a/gr-qtgui/lib/freq_sink_f_impl.cc b/gr-qtgui/lib/freq_sink_f_impl.cc
index 5e2f38b..e3baeb0 100644
--- a/gr-qtgui/lib/freq_sink_f_impl.cc
+++ b/gr-qtgui/lib/freq_sink_f_impl.cc
@@ -153,6 +153,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     freq_sink_f_impl::pyqwidget()
     {
@@ -160,6 +161,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     freq_sink_f_impl::set_fft_size(const int fftsize)
diff --git a/gr-qtgui/lib/freq_sink_f_impl.h b/gr-qtgui/lib/freq_sink_f_impl.h
index bd9ff65..c7e9fe8 100644
--- a/gr-qtgui/lib/freq_sink_f_impl.h
+++ b/gr-qtgui/lib/freq_sink_f_impl.h
@@ -84,7 +84,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_fft_size(const int fftsize);
       int fft_size() const;
diff --git a/gr-qtgui/lib/histogram_sink_f_impl.cc b/gr-qtgui/lib/histogram_sink_f_impl.cc
index 7519e18..843571a 100644
--- a/gr-qtgui/lib/histogram_sink_f_impl.cc
+++ b/gr-qtgui/lib/histogram_sink_f_impl.cc
@@ -132,6 +132,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     histogram_sink_f_impl::pyqwidget()
     {
@@ -139,6 +140,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     histogram_sink_f_impl::set_y_axis(double min, double max)
diff --git a/gr-qtgui/lib/histogram_sink_f_impl.h b/gr-qtgui/lib/histogram_sink_f_impl.h
index fb1b5c6..e255889 100644
--- a/gr-qtgui/lib/histogram_sink_f_impl.h
+++ b/gr-qtgui/lib/histogram_sink_f_impl.h
@@ -69,7 +69,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_y_axis(double min, double max);
       void set_x_axis(double min, double max);
diff --git a/gr-qtgui/lib/sink_c_impl.cc b/gr-qtgui/lib/sink_c_impl.cc
index a5fd74a..55ccb4a 100644
--- a/gr-qtgui/lib/sink_c_impl.cc
+++ b/gr-qtgui/lib/sink_c_impl.cc
@@ -160,6 +160,7 @@ namespace gr {
       return d_main_gui->qwidget();
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     sink_c_impl::pyqwidget()
     {
@@ -167,6 +168,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     sink_c_impl::set_fft_size(const int fftsize)
diff --git a/gr-qtgui/lib/sink_c_impl.h b/gr-qtgui/lib/sink_c_impl.h
index 4bf9ec6..56c90f3 100644
--- a/gr-qtgui/lib/sink_c_impl.h
+++ b/gr-qtgui/lib/sink_c_impl.h
@@ -82,7 +82,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_fft_size(const int fftsize);
       int fft_size() const;
diff --git a/gr-qtgui/lib/sink_f_impl.cc b/gr-qtgui/lib/sink_f_impl.cc
index b85ebdb..ce26d6b 100644
--- a/gr-qtgui/lib/sink_f_impl.cc
+++ b/gr-qtgui/lib/sink_f_impl.cc
@@ -152,6 +152,7 @@ namespace gr {
       return d_main_gui->qwidget();
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     sink_f_impl::pyqwidget()
     {
@@ -159,6 +160,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     sink_f_impl::set_fft_size(const int fftsize)
diff --git a/gr-qtgui/lib/sink_f_impl.h b/gr-qtgui/lib/sink_f_impl.h
index 86593be..801a200 100644
--- a/gr-qtgui/lib/sink_f_impl.h
+++ b/gr-qtgui/lib/sink_f_impl.h
@@ -80,7 +80,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_fft_size(const int fftsize);
       int fft_size() const;
diff --git a/gr-qtgui/lib/time_raster_sink_b_impl.cc b/gr-qtgui/lib/time_raster_sink_b_impl.cc
index 98ccc6b..dcf21a6 100644
--- a/gr-qtgui/lib/time_raster_sink_b_impl.cc
+++ b/gr-qtgui/lib/time_raster_sink_b_impl.cc
@@ -149,6 +149,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     time_raster_sink_b_impl::pyqwidget()
     {
@@ -156,6 +157,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     time_raster_sink_b_impl::set_update_time(double t)
diff --git a/gr-qtgui/lib/time_raster_sink_b_impl.h b/gr-qtgui/lib/time_raster_sink_b_impl.h
index 0b02d53..6800568 100644
--- a/gr-qtgui/lib/time_raster_sink_b_impl.h
+++ b/gr-qtgui/lib/time_raster_sink_b_impl.h
@@ -75,7 +75,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_update_time(double t);
       void set_title(const std::string &title);
diff --git a/gr-qtgui/lib/time_raster_sink_c_impl.cc b/gr-qtgui/lib/time_raster_sink_c_impl.cc
index 93eba63..9bfa98a 100644
--- a/gr-qtgui/lib/time_raster_sink_c_impl.cc
+++ b/gr-qtgui/lib/time_raster_sink_c_impl.cc
@@ -114,6 +114,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     time_raster_sink_c_impl::pyqwidget()
     {
@@ -121,6 +122,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     time_raster_sink_c_impl::set_update_time(double t)
diff --git a/gr-qtgui/lib/time_raster_sink_c_impl.h b/gr-qtgui/lib/time_raster_sink_c_impl.h
index 8263046..b9efea2 100644
--- a/gr-qtgui/lib/time_raster_sink_c_impl.h
+++ b/gr-qtgui/lib/time_raster_sink_c_impl.h
@@ -64,7 +64,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_update_time(double t);
       void set_title(const std::string &title);
diff --git a/gr-qtgui/lib/time_raster_sink_f_impl.cc b/gr-qtgui/lib/time_raster_sink_f_impl.cc
index b2a9345..014c981 100644
--- a/gr-qtgui/lib/time_raster_sink_f_impl.cc
+++ b/gr-qtgui/lib/time_raster_sink_f_impl.cc
@@ -147,6 +147,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     time_raster_sink_f_impl::pyqwidget()
     {
@@ -154,6 +155,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     time_raster_sink_f_impl::set_update_time(double t)
diff --git a/gr-qtgui/lib/time_raster_sink_f_impl.h b/gr-qtgui/lib/time_raster_sink_f_impl.h
index 3609bf3..f7caf75 100644
--- a/gr-qtgui/lib/time_raster_sink_f_impl.h
+++ b/gr-qtgui/lib/time_raster_sink_f_impl.h
@@ -74,7 +74,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_update_time(double t);
       void set_title(const std::string &title);
diff --git a/gr-qtgui/lib/time_sink_c_impl.cc b/gr-qtgui/lib/time_sink_c_impl.cc
index e237bce..7eb1dd5 100644
--- a/gr-qtgui/lib/time_sink_c_impl.cc
+++ b/gr-qtgui/lib/time_sink_c_impl.cc
@@ -134,6 +134,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     time_sink_c_impl::pyqwidget()
     {
@@ -141,6 +142,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     time_sink_c_impl::set_y_axis(double min, double max)
diff --git a/gr-qtgui/lib/time_sink_c_impl.h b/gr-qtgui/lib/time_sink_c_impl.h
index 67c4f32..03dcbe2 100644
--- a/gr-qtgui/lib/time_sink_c_impl.h
+++ b/gr-qtgui/lib/time_sink_c_impl.h
@@ -85,7 +85,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_y_axis(double min, double max);
       void set_update_time(double t);
diff --git a/gr-qtgui/lib/time_sink_f_impl.cc b/gr-qtgui/lib/time_sink_f_impl.cc
index 96d62fd..0c8e765 100644
--- a/gr-qtgui/lib/time_sink_f_impl.cc
+++ b/gr-qtgui/lib/time_sink_f_impl.cc
@@ -136,6 +136,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     time_sink_f_impl::pyqwidget()
     {
@@ -143,6 +144,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     time_sink_f_impl::set_y_axis(double min, double max)
diff --git a/gr-qtgui/lib/time_sink_f_impl.h b/gr-qtgui/lib/time_sink_f_impl.h
index 8e6a3a5..bbad48d 100644
--- a/gr-qtgui/lib/time_sink_f_impl.h
+++ b/gr-qtgui/lib/time_sink_f_impl.h
@@ -85,7 +85,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void set_y_axis(double min, double max);
       void set_update_time(double t);
diff --git a/gr-qtgui/lib/waterfall_sink_c_impl.cc b/gr-qtgui/lib/waterfall_sink_c_impl.cc
index 0a7779d..ee74f96 100644
--- a/gr-qtgui/lib/waterfall_sink_c_impl.cc
+++ b/gr-qtgui/lib/waterfall_sink_c_impl.cc
@@ -152,6 +152,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     waterfall_sink_c_impl::pyqwidget()
     {
@@ -159,6 +160,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     waterfall_sink_c_impl::clear_data()
diff --git a/gr-qtgui/lib/waterfall_sink_c_impl.h b/gr-qtgui/lib/waterfall_sink_c_impl.h
index bf729f3..95781c5 100644
--- a/gr-qtgui/lib/waterfall_sink_c_impl.h
+++ b/gr-qtgui/lib/waterfall_sink_c_impl.h
@@ -82,7 +82,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void clear_data();
 
diff --git a/gr-qtgui/lib/waterfall_sink_f_impl.cc b/gr-qtgui/lib/waterfall_sink_f_impl.cc
index b629973..3be4f14 100644
--- a/gr-qtgui/lib/waterfall_sink_f_impl.cc
+++ b/gr-qtgui/lib/waterfall_sink_f_impl.cc
@@ -151,6 +151,7 @@ namespace gr {
       return d_main_gui;
     }
 
+#ifdef ENABLE_PYTHON
     PyObject*
     waterfall_sink_f_impl::pyqwidget()
     {
@@ -158,6 +159,7 @@ namespace gr {
       PyObject *retarg = Py_BuildValue("N", w);
       return retarg;
     }
+#endif
 
     void
     waterfall_sink_f_impl::clear_data()
diff --git a/gr-qtgui/lib/waterfall_sink_f_impl.h b/gr-qtgui/lib/waterfall_sink_f_impl.h
index 54a0cec..97c6aa2 100644
--- a/gr-qtgui/lib/waterfall_sink_f_impl.h
+++ b/gr-qtgui/lib/waterfall_sink_f_impl.h
@@ -82,7 +82,10 @@ namespace gr {
 
       void exec_();
       QWidget*  qwidget();
+
+#ifdef ENABLE_PYTHON
       PyObject* pyqwidget();
+#endif
 
       void clear_data();
 
-- 
1.7.10.4

