From e0fe4609d5cd07bd44552663515d044d8ca5be1b Mon Sep 17 00:00:00 2001
From: Philip Balister <philip@balister.org>
Date: Mon, 23 Sep 2013 10:44:33 -0400
Subject: [PATCH 27/40] gr-filter : Fix memory leaks in pm_remez.cc.

Addresses Coverity issues 1046146, 1046277, 1046375, 1046292, 1046282,
1046388, 1046097, 1046381, 1046149.

Signed-off-by: Philip Balister <philip@balister.org>
---
 gr-filter/lib/pm_remez.cc |   13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/gr-filter/lib/pm_remez.cc b/gr-filter/lib/pm_remez.cc
index 5598343..c23095a 100644
--- a/gr-filter/lib/pm_remez.cc
+++ b/gr-filter/lib/pm_remez.cc
@@ -694,8 +694,18 @@ namespace gr {
 	calc_parms(r, Ext, Grid, D, W, ad, x, y);
 	calc_error(r, ad, x, y, gridsize, Grid, D, W, E);
 	int err = search(r, Ext, gridsize, E);
-	if(err)
+	if(err) {
+          free(Grid);
+          free(W);
+          free(D);
+          free(E);
+          free(Ext);
+          free(taps);
+          free(x);
+          free(y);
+          free(ad);
 	  return err;
+        }
 	for(int i = 0; i <= r; i++)
 	  assert(Ext[i] < gridsize);
 	if(is_done(r, Ext, E))
@@ -738,6 +748,7 @@ namespace gr {
       free(D);
       free(E);
       free(Ext);
+      free(taps);
       free(x);
       free(y);
       free(ad);
-- 
1.7.10.4

