From 9adfc42e0296d969a498249d837e29bf46bf65a9 Mon Sep 17 00:00:00 2001
From: Marcus Leech <mleech@ripnet.com>
Date: Wed, 1 Feb 2012 17:15:59 -0500
Subject: [PATCH 18/47] uhd: fix for uhd_fft to work with basicRx d'board.

---
 gr-uhd/apps/uhd_fft.py |   25 ++++++++++++++++---------
 1 files changed, 16 insertions(+), 9 deletions(-)

diff --git a/gr-uhd/apps/uhd_fft.py b/gr-uhd/apps/uhd_fft.py
index f311a90..7314c47 100755
--- a/gr-uhd/apps/uhd_fft.py
+++ b/gr-uhd/apps/uhd_fft.py
@@ -169,17 +169,24 @@ class app_top_block(stdgui2.std_top_block):
         g = self.u.get_gain_range()
 
         # some configurations don't have gain control
-        if g.stop() > g.start():
-            myform['gain'] = form.slider_field(parent=self.panel,
-                                                   sizer=hbox, label="Gain",
-                                                   weight=3,
-                                                   min=int(g.start()), max=int(g.stop()),
-                                                   callback=self.set_gain)
+        if g.stop() <= g.start():
+            glow = 0.0
+            ghigh = 1.0
+            
+        else:
+            glow = g.start()
+            ghigh = g.stop()
+            
+        myform['gain'] = form.slider_field(parent=self.panel,
+                                               sizer=hbox, label="Gain",
+                                               weight=3,
+                                               min=int(glow), max=int(ghigh),
+                                               callback=self.set_gain)
 
-            hbox.Add((5,0), 0, 0)
-            vbox.Add(hbox, 0, wx.EXPAND)
+        hbox.Add((5,0), 0, 0)
+        vbox.Add(hbox, 0, wx.EXPAND)
 
-            self._build_subpanel(vbox)
+        self._build_subpanel(vbox)
 
     def _build_subpanel(self, vbox_arg):
         # build a secondary information panel (sometimes hidden)
-- 
1.7.9.1

