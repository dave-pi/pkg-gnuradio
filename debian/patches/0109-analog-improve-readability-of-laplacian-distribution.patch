From 7e9276826e48592d7f58bea1017d5d60d34d48c1 Mon Sep 17 00:00:00 2001
From: Andrej Rode <mail@andrejro.de>
Date: Mon, 19 Mar 2018 23:33:03 +0100
Subject: [PATCH 109/112] analog: improve readability of laplacian distribution

---
 gnuradio-runtime/lib/math/random.cc | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/gnuradio-runtime/lib/math/random.cc b/gnuradio-runtime/lib/math/random.cc
index af90a33429..b27b912391 100644
--- a/gnuradio-runtime/lib/math/random.cc
+++ b/gnuradio-runtime/lib/math/random.cc
@@ -141,9 +141,12 @@ namespace gr {
   float
   random::laplacian()
   {
-    float z = ran1()-0.5;
-    if(z>0) return -logf(1-2*z);
-    else return logf(1+2*z);
+    float z = ran1();
+    if (z > 0.5){
+      return -logf(2*(1-z));
+    }else{
+      return logf(2*z);
+    }
   }
 
   /*
-- 
2.11.0

