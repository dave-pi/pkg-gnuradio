From 903ffe18342ea6880dbebc7dff546b429bef40bc Mon Sep 17 00:00:00 2001
From: Paul Cercueil <paul.cercueil@analog.com>
Date: Wed, 28 Jun 2017 11:33:38 +0200
Subject: [PATCH 45/58] Fix linking of Python modules under 64-bits MinGW

https://stackoverflow.com/questions/2842469/python-undefined-reference-to-imp-py-initmodule4

Signed-off-by: Paul Cercueil <paul.cercueil@analog.com>
---
 CMakeLists.txt | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 3b692bc92b..ce75babb52 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -151,6 +151,10 @@ endif(MSVC)
 
 if(WIN32)
 	add_definitions(-D_USE_MATH_DEFINES)
+
+	if (CMAKE_SIZEOF_VOID_P EQUAL 8)
+		add_definitions(-DMS_WIN64)
+	endif(CMAKE_SIZEOF_VOID_P EQUAL 8)
 endif(WIN32)
 
 # Record Compiler Info for record
-- 
2.11.0

