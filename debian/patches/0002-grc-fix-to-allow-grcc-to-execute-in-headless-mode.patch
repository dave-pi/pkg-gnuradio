From 5d650669a38d659724b001a6124cb8d775eaaf05 Mon Sep 17 00:00:00 2001
From: Roy Thompson <rthompso@gmail.com>
Date: Wed, 3 Jul 2013 16:00:05 -0700
Subject: [PATCH 02/31] grc: fix to allow grcc to execute in headless mode

---
 gr-utils/python/utils/grcc |    3 +++
 grc/gui/Colors.py          |   44 +++++++++++++++++++++++---------------------
 2 files changed, 26 insertions(+), 21 deletions(-)

diff --git a/gr-utils/python/utils/grcc b/gr-utils/python/utils/grcc
index 0477b81..dbcc89d 100755
--- a/gr-utils/python/utils/grcc
+++ b/gr-utils/python/utils/grcc
@@ -20,6 +20,9 @@
 # Boston, MA 02110-1301, USA.
 #
 
+import warnings
+warnings.simplefilter('ignore')
+
 try:
     from grc.python.Platform import Platform
 except ImportError:
diff --git a/grc/gui/Colors.py b/grc/gui/Colors.py
index c79dade..5f92bb0 100644
--- a/grc/gui/Colors.py
+++ b/grc/gui/Colors.py
@@ -1,5 +1,5 @@
 """
-Copyright 2008 Free Software Foundation, Inc.
+Copyright 2008,2013 Free Software Foundation, Inc.
 This file is part of GNU Radio
 
 GNU Radio Companion is free software; you can redistribute it and/or
@@ -16,25 +16,27 @@ You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 """
+try:
+    import pygtk
+    pygtk.require('2.0')
+    import gtk
 
-import pygtk
-pygtk.require('2.0')
-import gtk
+    _COLORMAP = gtk.gdk.colormap_get_system() #create all of the colors
+    def get_color(color_code): return _COLORMAP.alloc_color(color_code, True, True)
 
-_COLORMAP = gtk.gdk.colormap_get_system() #create all of the colors
-def get_color(color_code): return _COLORMAP.alloc_color(color_code, True, True)
-
-HIGHLIGHT_COLOR = get_color('#00FFFF')
-BORDER_COLOR = get_color('black')
-#param entry boxes
-PARAM_ENTRY_TEXT_COLOR = get_color('black')
-ENTRYENUM_CUSTOM_COLOR = get_color('#EEEEEE')
-#flow graph color constants
-FLOWGRAPH_BACKGROUND_COLOR = get_color('#FFF9FF')
-#block color constants
-BLOCK_ENABLED_COLOR = get_color('#F1ECFF')
-BLOCK_DISABLED_COLOR = get_color('#CCCCCC')
-#connection color constants
-CONNECTION_ENABLED_COLOR = get_color('black')
-CONNECTION_DISABLED_COLOR = get_color('#999999')
-CONNECTION_ERROR_COLOR = get_color('red')
+    HIGHLIGHT_COLOR = get_color('#00FFFF')
+    BORDER_COLOR = get_color('black')
+    #param entry boxes
+    PARAM_ENTRY_TEXT_COLOR = get_color('black')
+    ENTRYENUM_CUSTOM_COLOR = get_color('#EEEEEE')
+    #flow graph color constants
+    FLOWGRAPH_BACKGROUND_COLOR = get_color('#FFF9FF')
+    #block color constants
+    BLOCK_ENABLED_COLOR = get_color('#F1ECFF')
+    BLOCK_DISABLED_COLOR = get_color('#CCCCCC')
+    #connection color constants
+    CONNECTION_ENABLED_COLOR = get_color('black')
+    CONNECTION_DISABLED_COLOR = get_color('#999999')
+    CONNECTION_ERROR_COLOR = get_color('red')
+except:
+    print 'Unable to import Colors'
-- 
1.7.10.4

