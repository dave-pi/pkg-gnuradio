From e9ba60e518193ddcbfb069270bb674b4e7964f25 Mon Sep 17 00:00:00 2001
From: Marcus Leech <mleech@ripnet.com>
Date: Sun, 15 Jan 2012 23:49:52 -0500
Subject: [PATCH 06/47] core: fix for off-by-one issue in strip chart.
 Increases buffer size for longer displays.

---
 gnuradio-core/src/lib/io/gr_oscope_guts.cc |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/gnuradio-core/src/lib/io/gr_oscope_guts.cc b/gnuradio-core/src/lib/io/gr_oscope_guts.cc
index ce7feca..f1bdeb9 100644
--- a/gnuradio-core/src/lib/io/gr_oscope_guts.cc
+++ b/gnuradio-core/src/lib/io/gr_oscope_guts.cc
@@ -31,8 +31,7 @@
 #include <math.h>
 #include <assert.h>
 
-static const int OUTPUT_RECORD_SIZE = 2048;        // must be power of 2
-
+static const int OUTPUT_RECORD_SIZE = 16384;  // Must be power of 2
 static inline int
 wrap_bi (int buffer_index)                // wrap buffer index
 {
@@ -139,7 +138,7 @@ gr_oscope_guts::process_sample (const float *channel_data)
   {
 	  for (int i = 0; i < d_nchannels; i++)
 	  {
-	    for (int j = OUTPUT_RECORD_SIZE-1; j >= 0; j--)
+	    for (int j = OUTPUT_RECORD_SIZE-1; j > 0; j--)
 	    {
 			d_buffer[i][j] = d_buffer[i][j-1];
 		}
-- 
1.7.9.1

